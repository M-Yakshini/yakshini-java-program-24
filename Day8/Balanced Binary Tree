class Solution {
    public boolean isBalanced(TreeNode r) {
        return h(r) != -1;
    }
    int h(TreeNode r) {
        if (r == null) return 0;
        int l = h(r.left);
        int d = h(r.right);
        if (l == -1 || d == -1 || Math.abs(l - d) > 1) return -1;
        return 1 + Math.max(l, d);
    }
}
